{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const creatOfGalleryCardTemplate = imgInfo => {\n    return `\n    <li class=\"gallery-card\">\n    <a class=\"gallery-link\" href=\"${imgInfo.largeImageURL}\">\n      <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" />\n       <ul class=\"list-gallery-card\">\n        <li class=\"item-gallery-card\">\n            <p class=\"text-gallery-card\">likes</p>\n            <p class=\"t-text-gallery-card\">${imgInfo.likes}</p>\n        </li>\n        <li class=\"item-gallery-card\">\n            <p class=\"text-gallery-card\">views</p>\n            <p class=\"t-text-gallery-card\">${imgInfo.views}</p>\n        </li>\n        <li class=\"item-gallery-card\">\n            <p class=\"text-gallery-card\">comments</p>\n            <p class=\"t-text-gallery-card\">${imgInfo.comments}</p>\n        </li>\n        <li class=\"item-gallery-card\">\n            <p class=\"text-gallery-card\">downloads</p>\n            <p class=\"t-text-gallery-card\">${imgInfo.downloads}</p>\n        </li>\n    </ul>\n    </a>\n    </li>\n  `;\n}\n","import axios from \"axios\";\n\nexport const fetchPhotosByQuery = (searchedQuery, currentPage) => {\n    \n    const axiosOptions = {\nparams:{\n        key: '48486017-f8f4a4468403115709f2bbe90',\n        q: searchedQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page : currentPage,\n        per_page: 15,\n    }\n    };\n\n\n\n    return axios.get(`https://pixabay.com/api/`, axiosOptions);\n};","import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport { creatOfGalleryCardTemplate } from './js/render-functions';\nimport {fetchPhotosByQuery} from './js/pixabay-api';\n\n\n\nconst searchFormEl = document.querySelector('.search-form')\nconst galleryEl = document.querySelector('.gallery')\nconst spanLoader = document.querySelector('.span')\nconst loadMoreBtnEl  = document.querySelector('.btn')\n\nlet simpleLightbox = new SimpleLightbox('.gallery-link', { captionsData: 'alt', captionDelay: 250 });\n\nloadMoreBtnEl.classList.add('is-hidden');\n\nlet page = 1;\nlet searchedQuery = '';\n\n\nconst onSearchFormSubmit = async event => {\n    try {\n        event.preventDefault();\n        galleryEl.innerHTML = '';\n        spanLoader.classList.add('loader');\n\n        searchedQuery = event.currentTarget.elements.user_query.value.trim();\n         searchFormEl.reset();\n\n        \n     if (searchedQuery === '') {\n iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        color: '#ef4040',\n        theme: 'dark',\n        position: 'topRight',\n        iconUrl: './img/bi_x-octagon.svg',\n        imageWidth: 24,\n        maxWidth: 360,\n        });   \n    return;\n  }\n        page = 1;\n    loadMoreBtnEl.classList.add('is-hidden');\n\n\n        const {data} = await fetchPhotosByQuery(searchedQuery, page);\n\n        spanLoader.classList.remove('loader');\n        if (data.hits.length === 0) {\n                \n                iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        color: '#ef4040',\n        theme: 'dark',\n        position: 'topRight',\n        iconUrl: './img/bi_x-octagon.svg',\n        imageWidth: 24,\n        maxWidth: 360,\n                });   \n            galleryEl.innerHTML = '';\n            return;\n        }\n        \n\n\n    if (page * 15 <= data.totalHits) {\n        loadMoreBtnEl.classList.remove('is-hidden');\n        loadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n    }\n\n            const galleryTemplate = data.hits.map(el => creatOfGalleryCardTemplate(el)).join('');\n            galleryEl.innerHTML = galleryTemplate;\n    simpleLightbox.refresh();        \n    \n        \n    } catch (err) {\n        spanLoader.classList.remove('loader');\n        console.log(err);\n    }\n}\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit)\n\nconst onLoadMoreBtnClick = async event => {\n    try {        \n    spanLoader.classList.add('loaders');\n    page++;\n    const { data } = await fetchPhotosByQuery(searchedQuery, page);\n        \n    spanLoader.classList.remove('loaders');\n\n\n    const galleryTemplate = data.hits.map(el => creatOfGalleryCardTemplate(el)).join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n    scroll();\n        \n    simpleLightbox.refresh();\n\nif (page * 15 >= data.totalHits) {\n        loadMoreBtnEl.classList.add('is-hidden');\n    loadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n    iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        maxWidth: 360,\n                }); \n    }\n\n} catch (err) {\n    console.log(err);   \n}\n}\n\nconst scroll = () => {\n  const { height: cardHeight } =\n    galleryEl.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};"],"names":["creatOfGalleryCardTemplate","imgInfo","fetchPhotosByQuery","searchedQuery","currentPage","axiosOptions","axios","searchFormEl","galleryEl","spanLoader","loadMoreBtnEl","simpleLightbox","SimpleLightbox","page","onSearchFormSubmit","event","iziToast","data","onLoadMoreBtnClick","galleryTemplate","el","err","scroll","cardHeight"],"mappings":"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"}